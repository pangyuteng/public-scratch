import os
import pandas as pd
import yfinance as yf

os.makedirs("tmp",exist_ok=True)

for ticker,tickerstr in [('SPY','SPY'),('^VIX','VIX'),('^SPX','SPX')]:
    csv_file = f"tmp/{tickerstr}.csv"
    if not os.path.exists(csv_file):
        df = yf.Ticker(ticker).history(period="max")
        df.to_csv(csv_file)
    else:
        print(f"file found, will not download: {csv_file}")


# TODO: verify yahoo close data with cboe... last few records look fine below.

#DATE,SPX
#01/02/1975,70.230000

#DATE,OPEN,HIGH,LOW,CLOSE
#01/02/1990,17.240000,17.240000,17.240000,17.240000

# 08/12/2025,6445.760000
# 08/13/2025,6466.580000
# 08/14/2025,6468.540000
# 08/15/2025,6449.800000

# 2025-08-12 00:00:00-04:00,6395.169921875,6446.5498046875,6385.759765625,6445.759765625,5135300000,0.0,0.0
# 2025-08-13 00:00:00-04:00,6462.669921875,6480.27978515625,6445.02001953125,6466.580078125,5195950000,0.0,0.0
# 2025-08-14 00:00:00-04:00,6453.4599609375,6473.919921875,6441.06982421875,6468.5400390625,4462050000,0.0,0.0
# 2025-08-15 00:00:00-04:00,6477.3798828125,6481.33984375,6441.85009765625,6449.7998046875,4575060000,0.0,0.0


# 08/13/2025,14.620000,14.810000,14.300000,14.490000
# 08/14/2025,14.660000,15.390000,14.570000,14.830000

# 2025-08-13 00:00:00-05:00,14.619999885559082,14.8100004196167,14.300000190734863,14.489999771118164,0,0.0,0.0
# 2025-08-14 00:00:00-05:00,14.65999984741211,15.390000343322754,14.569999694824219,14.829999923706055,0,0.0,0.0
# 2025-08-15 00:00:00-05:00,14.430000305175781,15.180000305175781,14.399999618530273,15.09000015258789,0,0.0,0.0


